<!DOCTYPE html>
<html>
<head>
	<script src="https://d3js.org/d3.v4.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
	<meta name="generator" content="Hugo 0.30.2" />

    <meta http-equiv="Content-Type" content="text/html" charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />


    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <title> Cotidiano do Açude Velho &middot; A vida das pessoas em seu entorno </title>

    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />


    <link rel="stylesheet" type="text/css" href="https://luciojp.github.io/hugoscroll//css/base.css" />
</head>

<body class="home-template">

	    <header id="site-head" style="background-image: url()">
        <div class="vertical">
            <div id="site-head-content" class="inner">

                 <a id="blog-logo" href="https://luciojp.github.io/hugoscroll/"><img src="" alt="" /></a>
                <h1 class="blog-title">Cotidiano do Açude Velho</h1>
                <h4 class="blog-description">
									O açude velho é um dos principais pontos da cidade de Campina Grande.	Se você não conhece, não se preocupe, vamos te apresentar!
									Mas se você já conhece, em algum momento já parou para pensar nas pessoas que passam por este ponto?
									Provavelmente não! Então, vamos descobrir  algumas coisas  sobre elas? </h4>

                <a class='btn first' href="https://www.youtube.com/watch?v=w4XuMn1zutc" target="_blank">Quero conhecer o Açude Velho!</a>
                <a class='btn last' href="#inicio2" >Vamos as descobertas!</a><br>

            </div>
        </div>

    </header>

    <main class="content" role="main">
    <div class='fixed-nav'>
    </div>


                    <div class='post-holder'>

<article class="post">


    <header class="post-header">
        <a id="blog-logo" href="https://luciojp.github.io/hugoscroll/" name="inicio2">

                <a id="blog-logo" href="https://luciojp.github.io/hugoscroll/"><img src="" alt="" /></a>

        </a>
    </header>

		<p>Se você conhece pessoalmente ou conheceu o açude velho apenas vendo o vídeo acima, percebeu que ele é grande.
		No entorno dele, existem alguns pontos que são referência, dentre eles estão uma lanchonete do Bob's, uma estátua
	 	de Jackson do pandeiro e uma estátua de burrinhos. Estes pontos foram utilizados por pesquisadores que ficaram um
	 	dia inteiro contando quantas pessoas de cada sexo em cada modo de transporte passaram em cada ponto.</p>

		<p>
		Sabendo dos dados, vamos descobrir como é a vida do tão conhecido açude velho? Quem são as pessoas que passam por ele?
		Vamos conhecer algumas coisas!
		</p>

		<!--era class="post-title" -->
    <h1 class="">Quais os tipos de veículos mais presentes em cada ponto do açude velho? </h1>

    <section class="post-content">


		<div class="container">
	  	<div class="row">
	  	</div>
	  <div class="row mychart" id="chart">
	  	</div>
	  </div>


		<div class="ladoEsquerdo">
			<img src="/hugoscroll/img/legandaQuestao1.png" alt="Legendas" style="float:left";>
		</div>


    </section>



    <footer class="post-footer">
    </footer>
</article>
</div>
<div class='post-after'></div>

<div class='post-holder'>

	<article class="post">


    <header class="post-header">
        <a id="blog-logo" href="https://luciojp.github.io/hugoscroll/">

                <a id="blog-logo" href="https://luciojp.github.io/hugoscroll/"><img src="" alt="" /></a>

        </a>
    </header>
		<!--era class="post-title" -->
    <h1 class="">Em que horário cada tipo de veículo (incluindo bicicleta) é mais presente?</h1>

    <section class="post-content">
			<div class="container">
		  	<div class="row">
		  	</div>
		  <div class="row mychart" id="chart2">
		  	</div>
		  </div>

    </section>

    <footer class="post-footer">



    </footer>
</article>
</div>
<div class='post-after'></div>




          <div class='post-holder'>

<article class="post">


    <header class="post-header">
        <a id="blog-logo" href="https://luciojp.github.io/hugoscroll/">

                <a id="blog-logo" href="https://luciojp.github.io/hugoscroll/"><img src="" alt="" /></a>

        </a>
    </header>
		<!--era class="post-title" -->
    <h1 class="">Observando as pessoas que andam a pé ou de bicileta, existe algum horário em que
			existe predominância de algum sexo?</h1>


    <section class="post-content">
    <p>Sexo, horário, quantidade de pedestres/ciclistas.
			Categóricas: 2 (Sexo, pedestre/ciclista)
			Numéricas: 2 (Horário e Quantidade de pedestres/ciclistas)</p>

    </section>

    <footer class="post-footer">



    </footer>
</article>
</div>
<div class='post-after'></div>




</main>
        <footer class="site-footer">
        <div>

        <a href="https://github.com/luciojp" title="GitHub"><span class="fa fa-github fa-2x"></span></a>
        <a href="mailto:antonio.queiroz@ccc.ufcg.edu.br" title="Email antonio.queiroz@ccc.ufcg.edu.br"> <i class='fa fa-envelope-o fa-2x'></i></a>

        </div>
        <div class="inner">
             <section ><a>Contatos</a><br></section>
        </div>
    </footer>



    <script src="https://luciojp.github.io/hugoscroll//js/jquery.min.js"></script>
    <script type="text/javascript" src="https://luciojp.github.io/hugoscroll//js/index.min.js"></script>

<!-- Parte relacionada ao D3 daqui pra baixo -->

<script type="text/javascript">
    "use strict"

		<!-- PRIMEIRO GRAFICO DAQUI PRA BAIXO -->

    function desenhaGrafico1(dados) {
     // definicoes de altura e largura do svg e da vis dentro
      var alturaSVG = 800, larguraSVG = 500;
      var	margin = {top: 50, right: 20, bottom:30, left: 100}, // para descolar a vis das bordas do grafico
          larguraVis = larguraSVG - margin.left - margin.right,
          alturaVis = alturaSVG - margin.top - margin.bottom;
      /*
       * Prepara onde adicionaremos a visualizacao
       */
      var grafico = d3.select('#chart') // cria elemento <svg> com um <g> dentro
        .append('svg')
          .attr('width', larguraVis + margin.left + margin.right)
          .attr('height', alturaVis + margin.top + margin.bottom)
        .append('g') // para entender o <g> v� em x03-detalhes-svg.html
          .attr('transform', 'translate(' +  margin.left + ',' + margin.top + ')');
      /*
       * As escalas
       */
      var veiculos = ["Carro", "Moto", "Ônibus", "Caminhão", "Bicicleta"];

      var x = d3.scaleBand()
                .domain(veiculos)
                .range([0,larguraVis])
                .padding(.10);
      var y = d3.scaleLinear()
                .domain([700, 0])
                .range([0, alturaVis]);
      /*
       * As marcas
       */

			 var dadosResp01 = d3.nest()
			 										.key(d => d.local)
													.rollup(function(v){ return {
														media_carros : d3.mean(v, d => d.carros),
														media_motos : d3.mean(v, d => d.motos),
														media_onibus : d3.mean(v, d => d.onibus),
														media_caminhoes : d3.mean(v, d => d.caminhoes),
														media_ciclistas : d3.mean(v, d => d.total_ciclistas)
														}})
										.entries(dados)

       var corBobs = '#D9D3B3'; //creme
       var corBurrinhos = '#499B8F'; //verde
       var corJackson = '#A63467'; //roxo

				grafico.selectAll('g')
              .data(dados)
              .enter()
                .append('rect')
                  .attr('x', x(veiculos[0]))
                  .attr('width', x.bandwidth())
                  .attr('y', y(dadosResp01[1].value.media_carros)) //carros em jackson
                  .attr('height', dadosResp01[1].value.media_carros)
                  .style('fill', corJackson);


			grafico.selectAll('g')
							.data(dados)
							.enter()
							.append('rect')
							.attr('x', x(veiculos[0]))
							.attr('width', x.bandwidth())
							.attr('y', y(dadosResp01[2].value.media_carros)) //carros em burrinhos
							.attr('height', dadosResp01[2].value.media_carros)
							.style('fill', corBurrinhos);

			grafico.selectAll('g')
						 .data(dados)
						 .enter()
							 .append('rect')
								 .attr('x', x(veiculos[0])) //carros
								 .attr('width', x.bandwidth())
								 .attr('y', y(dadosResp01[0].value.media_carros)) //tudo o que tem carros | carrosBobs
								 .attr('height', dadosResp01[0].value.media_carros)
								 .style('fill', corBobs);

							// Moto para baixo



			 grafico.selectAll('g')
							 .data(dados)
							 .enter()
								 .append('rect')
									 .attr('x', x(veiculos[1]))
									 .attr('width', x.bandwidth())
									 .attr('y', y(dadosResp01[1].value.media_motos))
									 .attr('height', dadosResp01[1].value.media_motos)
									 .style('fill', corJackson);


			 grafico.selectAll('g')
							 .data(dados)
							 .enter()
							 .append('rect')
							 .attr('x', x(veiculos[1]))
							 .attr('width', x.bandwidth())
							 .attr('y', y(dadosResp01[2].value.media_motos))
							 .attr('height', dadosResp01[2].value.media_motos)
							 .style('fill', corBurrinhos);

			 grafico.selectAll('g')
			 .data(dados)
			 .enter()
			 .append('rect')
			 .attr('x', x(veiculos[1]))
			 .attr('width', x.bandwidth())
			 .attr('y', y(dadosResp01[0].value.media_motos))
			 .attr('height', dadosResp01[0].value.media_motos)
			 .style('fill', corBobs);
							 //onibus para baixo



 			 grafico.selectAll('g')
 							 .data(dados)
 							 .enter()
 								 .append('rect')
 									 .attr('x', x(veiculos[2]))
 									 .attr('width', x.bandwidth())
 									 .attr('y', y(dadosResp01[1].value.media_onibus))
 									 .attr('height', dadosResp01[1].value.media_onibus)
 									 .style('fill', corJackson);


 			 grafico.selectAll('g')
 							 .data(dados)
 							 .enter()
 							 .append('rect')
 							 .attr('x', x(veiculos[2]))
 							 .attr('width', x.bandwidth())
 							 .attr('y', y(dadosResp01[2].value.media_onibus))
 							 .attr('height', dadosResp01[2].value.media_onibus)
 							 .style('fill', corBurrinhos);

			 grafico.selectAll('g')
			 .data(dados)
			 .enter()
			 .append('rect')
			 .attr('x', x(veiculos[2]))
			 .attr('width', x.bandwidth())
			 .attr('y', y(dadosResp01[0].value.media_onibus))
			 .attr('height', dadosResp01[0].value.media_onibus)
			 .style('fill', corBobs);
							 //caminhao para baixo

			 grafico.selectAll('g')
			 			.data(dados)
			 			.enter()
			 				.append('rect')
			 					.attr('x', x(veiculos[3]))
			 					.attr('width', x.bandwidth())
			 					.attr('y', y(dadosResp01[0].value.media_caminhoes))
			 					.attr('height', dadosResp01[0].value.media_caminhoes)
			 					.style('fill', corBobs);


			 grafico.selectAll('g')
			 				.data(dados)
			 				.enter()
			 					.append('rect')
			 						.attr('x', x(veiculos[3]))
			 						.attr('width', x.bandwidth())
			 						.attr('y', y(dadosResp01[1].value.media_caminhoes))
			 						.attr('height', dadosResp01[1].value.media_caminhoes)
			 						.style('fill', corJackson);


			 grafico.selectAll('g')
			 				.data(dados)
			 				.enter()
			 				.append('rect')
			 				.attr('x', x(veiculos[3]))
			 				.attr('width', x.bandwidth())
			 				.attr('y', y(dadosResp01[2].value.media_caminhoes))
			 				.attr('height', dadosResp01[2].value.media_caminhoes)
			 				.style('fill', corBurrinhos);

							//bicicleta daqui pra baixo

			grafico.selectAll('g')
					 .data(dados)
					 .enter()
						 .append('rect')
							 .attr('x', x(veiculos[4]))
							 .attr('width', x.bandwidth())
							 .attr('y', y(dadosResp01[0].value.media_ciclistas))
							 .attr('height', dadosResp01[0].value.media_ciclistas)
							 .style('fill', corBobs);


			grafico.selectAll('g')
						 .data(dados)
						 .enter()
							 .append('rect')
								 .attr('x', x(veiculos[4]))
								 .attr('width', x.bandwidth())
								 .attr('y', y(dadosResp01[1].value.media_ciclistas))
								 .attr('height', dadosResp01[1].value.media_ciclistas)
								 .style('fill', corJackson);


			grafico.selectAll('g')
						 .data(dados)
						 .enter()
						 .append('rect')
						 .attr('x', x(veiculos[4]))
						 .attr('width', x.bandwidth())
						 .attr('y', y(dadosResp01[2].value.media_ciclistas))
						 .attr('height', dadosResp01[2].value.media_ciclistas)
						 .style('fill', corBurrinhos);



        /*
       * Os eixos
       */
      grafico.append("g")
              .attr("class", "x axis")
              .attr("transform", "translate(0," + alturaVis + ")")
              .call(d3.axisBottom(x)); // magica do d3: gera eixo a partir da escala

      grafico.append('g')
              .attr('transform', 'translate(0,0)')
              .call(d3.axisLeft(y))  // gera eixo a partir da escala

      grafico.append("text")
        .attr("transform", "translate(-50," + (alturaVis + margin.top)/2 + ") rotate(-90)")
        .text("Quantidade contabilizada");

    }


		function desenhaGrafico2(dados) {

			var margin = {top: 20, right: 20, bottom: 30, left: 50},
	    width = 960 - margin.left - margin.right,
	    height = 600 - margin.top - margin.bottom;

			// set the ranges
			var x = d3.scaleLinear().range([0, width]);
			var y = d3.scaleLinear().range([height, 0]);

      /*
       * Prepara onde adicionaremos a visualizacao
       */

			 var grafico2 = d3.select("#chart2").append("svg")
			     .attr("width", width + margin.left + margin.right)
			     .attr("height", height + margin.top + margin.bottom)
			   .append("g")
			     .attr("transform",
			           "translate(" + margin.left + "," + margin.top + ")");

			/*
			* As marcas
			*/

			var dadosResp02 = d3.nest()
													.key(d => d.horario_inicial.split(":")[0]) //pega a Hora
													.rollup(function(v){ return {
														soma_carros : d3.sum(v, d => d.carros),
														soma_motos : d3.sum(v, d => d.motos),
														soma_onibus : d3.sum(v, d => d.onibus),
														soma_caminhoes : d3.sum(v, d => d.caminhoes),
														soma_ciclistas : d3.sum(v, d => d.total_ciclistas)
													}})
													.entries(dados)

			console.log(dadosResp02)

			/*
			 * As escalas
			 */
			var horas = [6,7,8,9,10,11,12,13,14,15,16,17,18,19,20];



				var carros = []
				var carrosValor = []
				var motos = []
				var onibus = []
				var caminhoes = []
				var ciclistas = []

			for(var i=0; i < dadosResp02.length; i++) {
					carros.push({hora:horas[i], valor:dadosResp02[i].value.soma_carros})
					carrosValor.push(dadosResp02[i].value.soma_carros)
					motos.push({hora:horas[i], valor:dadosResp02[i].value.soma_motos})
					onibus.push({hora:horas[i], valor:dadosResp02[i].value.soma_onibus})
					caminhoes.push({hora:horas[i], valor:dadosResp02[i].value.soma_caminhoes})
					ciclistas.push({hora:horas[i], valor:dadosResp02[i].value.soma_ciclistas})
				}

			console.log(carros)

			x.domain(d3.extent(carros, function(d) { return parseInt(d.hora); }));
		  y.domain([0, d3.max(carros, function(d) { return Math.max(d.valor); })]);


		// define lines
		var linhaCarros = d3.line()
		    .x(function(d) { return x(parseInt(carros.hora)); })
		    .y(function(d) { return y(carros.valor); });


				console.log("chegou aqui");





				// Add the valuelines path.
		 grafico2.append("path")
				 .data(carrosValor)
				 .attr("class", "line")
				 .style("stroke", "#F5F3FF")
				 .attr("d", linhaCarros);


				 // Add the Axis
		 grafico2.append("g")
						 	.attr("class", "x axis")
							.attr("transform", "translate(0," + height + ")")
							.call(d3.axisBottom(x)); // magica do d3: gera eixo a partir da escala
		grafico2.append('g')
	         .attr('transform', 'translate(0,0)')
	         .call(d3.axisLeft(y))  // gera eixo a partir da escala


	}

    var dadosCSV = "dados.csv";

    d3.csv(dadosCSV, function(dados) {
      desenhaGrafico1(dados);
    });

		d3.csv(dadosCSV, function(dados) {
			desenhaGrafico2(dados);
		});



  </script>


</body>
</html>
